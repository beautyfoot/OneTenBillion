<form class="form-horizontal" method="POST" novalidate>
    {% csrf_token %}
    {% for col in form %}
        <div class="form-group col-sm-6">
            <label class="col-sm-3 control-label">{{ col.item.label }}</label>
            <div class="col-sm-9" style="position: relative">
                {{ col.item }}
                {{ col.item.errors.0 }}
                {% if col.has_popup %}
                    <a onclick="popUp('{{ col.popup_url }}')">确认添加</a>
                {% endif %}
            </div>

        </div>
    {% endfor %}

    <div class="form-group">
        <div class="col-sm-offset-10 col-sm-2">
            <input type="submit" class="btn btn-primary" value="确认添加"/>
        </div>
    </div>
</form>
<script>
    function createElement(text, obj_pk, obj_url) {
        var op = document.createElement('option');
        op.innerHTML = text;
        op.setAttribute('selected', 'selected');
        op.setAttribute('value', obj_pk);
        document.getElementById(obj_url).appendChild(op);
    }

    function popUp(url) {
        window.open(url, url, 'status=2, height=500, width=700, left=450, top=100');  // http://127.0.0.1:8000/nb/app01/usergroup/add/?_popup=id_group
    }
</script>
